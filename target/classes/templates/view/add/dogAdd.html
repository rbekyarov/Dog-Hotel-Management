<!DOCTYPE html>
<th:block th:unless="${session.isEmpty()}">
    <script>
        $(document).ready(function () {
            $('#nav-link').click(function (e) {
                e.preventDefault();
                window.history.back();
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            $('select').selectize({
                sortField: 'text'
            });
        });
    </script>
    <script src="/js/selectize.min.js"></script>
    <link rel="stylesheet" href="/css/selectize.bootstrap3.min.css"/>

    <th:block th:fragment xmlns:th="http://www.w3.org/1999/xhtml">
        <link href="/css/dp-light.css" rel="stylesheet">
        <script defer src="/js/datepicker.js"></script>
        <div class="button_back">
            <a class="nav-link h5" id="nav-link">
                <button type="button" class="btn btn-danger btn-lg btnList"><span
                        class="glyphicon glyphicon-ok"></span>Back
                </button>
            </a>
        </div>
        <div class="container">
            <h2 class="page_title">Add Dog</h2>
            <form class="form_add" enctype="multipart/form-data" th:action="@{/view/add/dogAdd}"
                  th:method="post"
                  th:object="${dogDTO}">
                <div class="login-box">

                    <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:auto">
                        <tbody>
                        <tr>
                            <td><label class="file-label" for="fileImage" style="font-weight: bold">Add Image</label>
                                <div class="mb-4">
                                    <input class="file-input" type="file" id="fileImage" name="fileImage">
                                </div>
                                <input type="hidden" name="imgName" th:value="${dogDTO.imageName}">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:auto">
                        <tbody>
                        <tr>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="20px" width="20px"
                                                                      th:src="@{${'/pics/dog.png'}}">Dog
                                Name:</label><br>
                                <input class="form-control form-control-sm" style="width: 196px" type="text" id="name" th:field="*{name}" placeholder="Please enter Name"/>
                                <small th:if="${#fields.hasErrors('name')}"
                                       th:errors="*{name}"
                                       class="text-light form-text bg-danger "></small>
                                <br>
                            </td>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="20px" width="20px"
                                                                      th:src="@{${'/pics/kg.png'}}">Weight:</label><br>
                                <input class="form-control form-control-sm" style="width: 196px" type="text" id="description22" th:field="*{weight}"
                                       placeholder="Please enter Weight"/>
                                <small th:if="${#fields.hasErrors('weight')}"
                                       th:errors="*{weight}"
                                       class="text-light form-text bg-danger "></small>
                                <br>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:auto">
                        <tbody>
                        <tr>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="20px" width="20px"
                                                                      th:src="@{${'/pics/breed.png'}}">Breed:</label><br>
                                <select required th:field="*{breed.id}" style="width: 196px">
                                    <option value="">Please select</option>
                                    <option
                                            th:each="b : ${allBreeds}"
                                            th:value="${b.id}"
                                            th:text="${b.breedName}"></option>

                                </select>
                            </td>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="20px" width="20px"
                                                                      th:src="@{${'/pics/behavior.png'}}">
                                Behavior:</label><br>
                                <select required th:field="*{behavior.id}" style="width: 196px">
                                    <option value="">Please select</option>
                                    <option
                                            th:each="b : ${allBehaviors}"
                                            th:value="${b.id}"
                                            th:text="${b.name}"></option>
                                </select>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:auto">
                        <tbody>
                        <tr>
                            <td>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="20px" width="20px"
                                                                      th:src="@{${'/pics/calendar.png'}}">BirthDate:</label><br>
                                <div>
                                    <input class="form-control form-control-sm" type="text" id="input1" style="width: 196px" th:field="*{birthDate}"
                                           placeholder="Please enter BirthDate"/>
                                    <small th:if="${#fields.hasErrors('birthDate')}"
                                           th:errors="*{birthDate}"
                                           class="text-light form-text bg-danger "></small>
                                </div>
                            </td>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="20px" width="20px"
                                                                      th:src="@{${'/pics/calendar.png'}}">Last Deworming
                                Date:</label><br>
                                <div>
                                    <input class="form-control form-control-sm" type="text" id="input2" style="width: 196px" th:field="*{lastDewormingDate}"
                                           placeholder="Please enter Deworming"/>
                                    <small th:if="${#fields.hasErrors('lastDewormingDate')}"
                                           th:errors="*{lastDewormingDate}"
                                           class="text-light form-text bg-danger "></small>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:auto">
                        <tbody>
                        <tr>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="20px" width="20px"
                                                                      th:src="@{${'/pics/client.png'}}">Client:</label><br>
                                <select id="select-state" required th:field="*{client.id}" style="width: 400px">
                                    <option value="">Please select</option>
                                    <option
                                            th:each="c : ${allClients}"
                                            th:value="${c.id}"
                                            th:text="${c.firstName+' '+c.lastName+' - '+c.phone}"></option>

                                </select>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:auto">
                        <tbody>
                        <tr>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="25px" width="25px"
                                                                      th:src="@{${'/pics/sex.png'}}">Sex:</label><br>
                                <select class="form-control form-control-sm"  th:field="*{sex}" style="width: 196px">
                                    <option value="M">M</option>
                                    <option value="F">F</option>
                                </select>
                            </td>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="25px" width="25px"
                                                                      th:src="@{${'/pics/pasport.png'}}">Passport:</label><br>
                                <select class="form-control form-control-sm" style="width: 196px" th:field="*{passport}">
                                    <option value="NO">NO</option>
                                    <option value="YES">YES</option>
                                </select>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:auto">
                        <tbody>
                        <tr>
                            <td><label style="font-weight: bold"><img align="center" src="#" height="25px" width="25px"
                                                                      th:src="@{${'/pics/microchip.png'}}">
                                Microchip:</label><br>
                                <select class="form-control form-control-sm" style="width: 196px" th:field="*{microchip}" id="Microchip" onclick="show()">
                                    <option value="NO">NO</option>
                                    <option value="YES">YES</option>
                                </select>
                            </td>
                            <td id="description23"><label style="font-weight: bold"></label><br>
                                <input class="form-control form-control-sm" type="text" style="width: 196px"  th:field="*{microchipNumber}"
                                       placeholder="Please enter Number"/>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <br>
                <div class="button_submit">
                    <div>
                        <div>
                            <input type="submit" class="btn btn-danger btn-lg btnList" value="Submit Dog"/>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <script>
            /* $(document).ready(function(){

            }); */
            function showImageThumbnail(fileInput) {
                if (fileInput.files && fileInput.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('thumbnail').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(fileInput.files[0]);
                }
            }

            $('#fileImage').change(function () {
                showImageThumbnail(this);
            });

            $('.file-input').on("change", function () {
                var fileName = $(this).val().split("\\").pop();
                $(this).siblings(".file-label").addClass("selected").html(fileName);
            });
        </script>
        <script>
            window.addEventListener("load", () => {
                picker.attach({target: "input1"});
            });
        </script>
        <script>
            window.addEventListener("load", () => {
                picker.attach({target: "input2"});
            });
        </script>
        <script type="text/javascript">
            function show() {
                let value = document.getElementById('Microchip').value;
                if (value == 'YES') {
                    document.getElementById('description23').style.visibility = 'visible';
                } else {
                    document.getElementById('description23').style.visibility = 'hidden';
                }
            }
        </script>
    </th:block>
</th:block>